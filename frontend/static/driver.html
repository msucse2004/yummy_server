<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Yummy - Driver</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <h1>Yummy Driver</h1>
      <button class="logout" onclick="doLogout()">로그아웃</button>
    </header>
    <div id="pendingApprovalSection" class="pending-approval" style="display:none">
      <div class="card" style="max-width: 400px; margin: 2rem auto; text-align: center;">
        <h2>승인 대기중</h2>
        <p>관리자 승인 후 이용 가능합니다.</p>
        <button class="btn btn-primary" onclick="doLogout()">로그아웃</button>
      </div>
    </div>
    <main class="app-content" id="driverMain">
      <nav class="nav-tabs">
        <a href="#" class="active" data-tab="plans">배정된 플랜</a>
        <a href="#" data-tab="myinfo">내정보</a>
      </nav>

      <div id="tab-plans" class="tab-content">
        <div id="plansSection">
          <h2>배정된 플랜</h2>
          <div id="plansList"></div>
        </div>
        <div id="routeSection" style="display:none">
          <h2 id="routeTitle"></h2>
          <div id="routeContext" class="card"></div>
          <div id="routeStopListCard" class="card">
            <h3 style="margin:0 0 0.5rem">배달 목록</h3>
            <div id="stopsList"></div>
          </div>
          <p><button class="btn btn-secondary" onclick="backToPlans()">플랜 목록으로</button></p>
        </div>
      </div>

      <div id="tab-myinfo" class="tab-content" style="display:none">
        <div class="card">
          <h2>내정보</h2>
          <div id="myInfoContent"></div>
        </div>
      </div>
    </main>
  </div>

  <div id="nextDestFullscreen" class="next-dest-fullscreen" style="display:none">
    <div class="next-dest-header">
      <h2 id="nextDestTitle">다음 목적지</h2>
      <button type="button" class="btn btn-secondary" onclick="closeNextDestFullscreen()">뒤로가기</button>
    </div>
    <div id="nextDestInfo" class="next-dest-info"></div>
    <div id="nextDestMapContainer" class="next-dest-map"></div>
    <div class="next-dest-actions">
      <a id="nextDestKakaoNavLink" href="#" target="_blank" class="btn btn-secondary">카카오네비에서 열기</a>
      <button type="button" class="btn btn-primary" id="nextDestCompleteBtn" onclick="completeFromNextDest()">배달완료</button>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script src="/js/api.js"></script>
  <script src="/js/driver.js"></script>
</body>
</html>
