<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Yummy(ë§›ë‚˜) - ë¡œê·¸ì¸</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="/css/common.css">
</head>
<body class="login-page">
  <div class="login-locale-select">
    <select id="loginPreferredLocale">
      <option value="ëŒ€í•œë¯¼êµ­" selected>ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
      <option value="ë¯¸êµ­">ğŸ‡ºğŸ‡¸ English</option>
      <option value="ì¼ë³¸">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
      <option value="ç®€ä½“ä¸­æ–‡">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</option>
      <option value="ç¹é«”ä¸­æ–‡">ğŸ‡¨ğŸ‡³ ç¹é«”ä¸­æ–‡</option>
      <option value="ë² íŠ¸ë‚¨">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
      <option value="ë¼ì˜¤ìŠ¤">ğŸ‡±ğŸ‡¦ àºàº²àºªàº²àº¥àº²àº§</option>
      <option value="ìº„ë³´ë””ì•„">ğŸ‡°ğŸ‡­ á—á¶áŸá¶ááŸ’á˜áŸ‚áš</option>
      <option value="ì¸ë„">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
      <option value="íŒŒí‚¤ìŠ¤íƒ„">ğŸ‡µğŸ‡° Ø§Ø±Ø¯Ùˆ</option>
    </select>
  </div>
  <main class="login-box">
    <h1 data-i18n="companyName">(ì£¼) ë§›ë‚˜ ì˜ë† ë²•ì¸</h1>
    <p class="subtitle" data-i18n="subtitle">ë°°ì†¡/ë¬¼ë¥˜ ê´€ë¦¬</p>
    <form id="loginForm" accept-charset="UTF-8">
      <input type="text" id="username" data-i18n-placeholder="usernamePlaceholder" placeholder="ì•„ì´ë””" required autocomplete="username" maxlength="64">
      <input type="password" id="password" data-i18n-placeholder="passwordPlaceholder" placeholder="ë¹„ë°€ë²ˆí˜¸" required autocomplete="current-password">
      <button type="submit" data-i18n="loginBtn">ë¡œê·¸ì¸</button>
      <p class="login-actions"><button type="button" class="btn-link" onclick="showSignupForm()" data-i18n="signupLink">íšŒì›ê°€ì…</button></p>
    </form>
    <p id="error" class="error"></p>

    <div id="signupSection" style="display:none">
      <h2 data-i18n="signupTitle">íšŒì›ê°€ì…</h2>
      <form id="signupForm" accept-charset="UTF-8">
        <div class="signup-username-wrap">
          <input type="text" id="signupUsername" data-i18n-placeholder="signupUsernamePlaceholder" placeholder="ì•„ì´ë”” (í•œê¸€, ì˜ë¬¸, ìˆ«ì ë“±)" required autocomplete="username" minlength="1" maxlength="64" onblur="checkSignupUsername()">
          <span id="signupUsernameStatus" class="username-status" data-i18n-title="usernameCheckHint" title="ì…ë ¥ í›„ ë‹¤ë¥¸ ê³³ì„ í´ë¦­í•˜ë©´ ì¤‘ë³µ í™•ì¸"></span>
        </div>
        <input type="password" id="signupPassword" data-i18n-placeholder="signupPasswordPlaceholder" placeholder="ë¹„ë°€ë²ˆí˜¸ (4ì ì´ìƒ)" required autocomplete="new-password" minlength="4">
        <input type="text" id="signupDisplayName" data-i18n-placeholder="signupDisplayNamePlaceholder" placeholder="ì´ë¦„ *" required autocomplete="name">
        <input type="tel" id="signupPhone" data-i18n-placeholder="signupPhonePlaceholder" placeholder="ì „í™”ë²ˆí˜¸ *" required autocomplete="tel">
        <div class="form-group">
          <label for="signupPreferredLocale" data-i18n="signupPreferredLocaleLabel">ì„ í˜¸ì–¸ì–´</label>
          <select id="signupPreferredLocale">
            <option value="ëŒ€í•œë¯¼êµ­" selected>ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
            <option value="ë¯¸êµ­">ğŸ‡ºğŸ‡¸ English</option>
            <option value="ì¼ë³¸">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
            <option value="ç®€ä½“ä¸­æ–‡">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</option>
            <option value="ç¹é«”ä¸­æ–‡">ğŸ‡¨ğŸ‡³ ç¹é«”ä¸­æ–‡</option>
            <option value="ë² íŠ¸ë‚¨">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
            <option value="ë¼ì˜¤ìŠ¤">ğŸ‡±ğŸ‡¦ àºàº²àºªàº²àº¥àº²àº§</option>
            <option value="ìº„ë³´ë””ì•„">ğŸ‡°ğŸ‡­ á—á¶áŸá¶ááŸ’á˜áŸ‚áš</option>
            <option value="ì¸ë„">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
            <option value="íŒŒí‚¤ìŠ¤íƒ„">ğŸ‡µğŸ‡° Ø§Ø±Ø¯Ùˆ</option>
          </select>
        </div>
        <button type="submit" data-i18n="signupBtn">ê°€ì…í•˜ê¸°</button>
        <p class="login-actions"><button type="button" class="btn-link" onclick="showLoginForm()" data-i18n="backToLogin">ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></p>
      </form>
      <p id="signupError" class="error"></p>
    </div>
  </main>
  <script src="/js/api.js"></script>
  <script>
    const I18N = {
      ëŒ€í•œë¯¼êµ­: {
        companyName: '(ì£¼) ë§›ë‚˜',
        subtitle: 'ë°°ì†¡/ë¬¼ë¥˜ ê´€ë¦¬',
        usernamePlaceholder: 'ì•„ì´ë””',
        passwordPlaceholder: 'ë¹„ë°€ë²ˆí˜¸',
        loginBtn: 'ë¡œê·¸ì¸',
        signupLink: 'íšŒì›ê°€ì…',
        signupTitle: 'íšŒì›ê°€ì…',
        signupUsernamePlaceholder: 'ì•„ì´ë”” (í•œê¸€, ì˜ë¬¸, ìˆ«ì ë“±)',
        signupPasswordPlaceholder: 'ë¹„ë°€ë²ˆí˜¸ (4ì ì´ìƒ)',
        signupDisplayNamePlaceholder: 'ì´ë¦„ *',
        signupPhonePlaceholder: 'ì „í™”ë²ˆí˜¸ *',
        signupPreferredLocaleLabel: 'ì„ í˜¸ì–¸ì–´',
        signupBtn: 'ê°€ì…í•˜ê¸°',
        backToLogin: 'ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°',
        usernameCheckHint: 'ì…ë ¥ í›„ ë‹¤ë¥¸ ê³³ì„ í´ë¦­í•˜ë©´ ì¤‘ë³µ í™•ì¸',
        usernameAvailable: 'ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤',
        usernameTaken: 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤',
        errUsernameRequired: 'ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”.',
        errPasswordMin: 'ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”.',
        errDisplayNameRequired: 'ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.',
        errPhoneRequired: 'ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.',
        errUsernameTaken: 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.',
        msgSignupSuccess: 'íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ì ìŠ¹ì¸ í›„ ë¡œê·¸ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        msgPendingApproval: 'ìŠ¹ì¸ ëŒ€ê¸°ì¤‘ì…ë‹ˆë‹¤. ê´€ë¦¬ì ìŠ¹ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
        msgResigned: 'í‡´ì‚¬ ì²˜ë¦¬ëœ ê³„ì •ì…ë‹ˆë‹¤.',
        errLoginFail: 'ë¡œê·¸ì¸ ì‹¤íŒ¨',
        errSignupFail: 'íšŒì›ê°€ì… ì‹¤íŒ¨',
        pageTitleLogin: 'ë¡œê·¸ì¸',
      },
      ë¯¸êµ­: {
        companyName: 'Yummy Inc.',
        subtitle: 'Delivery & Logistics',
        usernamePlaceholder: 'Username',
        passwordPlaceholder: 'Password',
        loginBtn: 'Log in',
        signupLink: 'Sign up',
        signupTitle: 'Sign up',
        signupUsernamePlaceholder: 'Username (letters, numbers)',
        signupPasswordPlaceholder: 'Password (min 4 chars)',
        signupDisplayNamePlaceholder: 'Name *',
        signupPhonePlaceholder: 'Phone *',
        signupPreferredLocaleLabel: 'Preferred language',
        signupBtn: 'Sign up',
        backToLogin: 'Back to login',
        usernameCheckHint: 'Click elsewhere to check availability',
        usernameAvailable: 'Username is available',
        usernameTaken: 'Username is already taken',
        errUsernameRequired: 'Please enter username.',
        errPasswordMin: 'Password must be at least 4 characters.',
        errDisplayNameRequired: 'Please enter name.',
        errPhoneRequired: 'Please enter phone number.',
        errUsernameTaken: 'Username is already taken.',
        msgSignupSuccess: 'Sign up complete. You can log in after admin approval.',
        msgPendingApproval: 'Pending approval. Please wait for admin approval.',
        msgResigned: 'This account has been resigned.',
        errLoginFail: 'Login failed',
        errSignupFail: 'Sign up failed',
        pageTitleLogin: 'Log in',
      },
      ì¼ë³¸: {
        companyName: 'æ ªå¼ä¼šç¤¾ãƒ¤ãƒŸãƒ¼',
        subtitle: 'é…é€ãƒ»ç‰©æµç®¡ç†',
        usernamePlaceholder: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ID',
        passwordPlaceholder: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
        loginBtn: 'ãƒ­ã‚°ã‚¤ãƒ³',
        signupLink: 'ä¼šå“¡ç™»éŒ²',
        signupTitle: 'ä¼šå“¡ç™»éŒ²',
        signupUsernamePlaceholder: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆè‹±æ•°å­—ãªã©ï¼‰',
        signupPasswordPlaceholder: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ4æ–‡å­—ä»¥ä¸Šï¼‰',
        signupDisplayNamePlaceholder: 'æ°å *',
        signupPhonePlaceholder: 'é›»è©±ç•ªå· *',
        signupPreferredLocaleLabel: 'å¸Œæœ›è¨€èª',
        signupBtn: 'ç™»éŒ²ã™ã‚‹',
        backToLogin: 'ãƒ­ã‚°ã‚¤ãƒ³ã«æˆ»ã‚‹',
        usernameCheckHint: 'ä»–ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨é‡è¤‡ç¢ºèª',
        usernameAvailable: 'åˆ©ç”¨å¯èƒ½ãªIDã§ã™',
        usernameTaken: 'æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™',
        errUsernameRequired: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
        errPasswordMin: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯4æ–‡å­—ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
        errDisplayNameRequired: 'æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
        errPhoneRequired: 'é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
        errUsernameTaken: 'æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹IDã§ã™ã€‚',
        msgSignupSuccess: 'ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ç®¡ç†è€…ã®æ‰¿èªå¾Œã«ãƒ­ã‚°ã‚¤ãƒ³ã§ãã¾ã™ã€‚',
        msgPendingApproval: 'æ‰¿èªå¾…ã¡ã§ã™ã€‚ç®¡ç†è€…ã®æ‰¿èªå¾Œã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚',
        msgResigned: 'é€€è·å‡¦ç†æ¸ˆã¿ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã™ã€‚',
        errLoginFail: 'ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—',
        errSignupFail: 'ç™»éŒ²å¤±æ•—',
        pageTitleLogin: 'ãƒ­ã‚°ã‚¤ãƒ³',
      },
      'ç®€ä½“ä¸­æ–‡': {
        companyName: 'Yummyæœ‰é™å…¬å¸',
        subtitle: 'é…é€ä¸ç‰©æµç®¡ç†',
        usernamePlaceholder: 'ç”¨æˆ·å',
        passwordPlaceholder: 'å¯†ç ',
        loginBtn: 'ç™»å½•',
        signupLink: 'æ³¨å†Œ',
        signupTitle: 'æ³¨å†Œ',
        signupUsernamePlaceholder: 'ç”¨æˆ·åï¼ˆå­—æ¯ã€æ•°å­—ç­‰ï¼‰',
        signupPasswordPlaceholder: 'å¯†ç ï¼ˆ4ä½ä»¥ä¸Šï¼‰',
        signupDisplayNamePlaceholder: 'å§“å *',
        signupPhonePlaceholder: 'ç”µè¯ *',
        signupPreferredLocaleLabel: 'é¦–é€‰è¯­è¨€',
        signupBtn: 'æ³¨å†Œ',
        backToLogin: 'è¿”å›ç™»å½•',
        usernameCheckHint: 'ç‚¹å‡»å…¶ä»–åœ°æ–¹æ£€æŸ¥æ˜¯å¦å¯ç”¨',
        usernameAvailable: 'ç”¨æˆ·åå¯ç”¨',
        usernameTaken: 'ç”¨æˆ·åå·²è¢«ä½¿ç”¨',
        errUsernameRequired: 'è¯·è¾“å…¥ç”¨æˆ·åã€‚',
        errPasswordMin: 'å¯†ç è‡³å°‘4ä½ã€‚',
        errDisplayNameRequired: 'è¯·è¾“å…¥å§“åã€‚',
        errPhoneRequired: 'è¯·è¾“å…¥ç”µè¯å·ç ã€‚',
        errUsernameTaken: 'ç”¨æˆ·åå·²è¢«ä½¿ç”¨ã€‚',
        msgSignupSuccess: 'æ³¨å†Œå®Œæˆã€‚ç®¡ç†å‘˜æ‰¹å‡†åå¯ç™»å½•ã€‚',
        msgPendingApproval: 'ç­‰å¾…æ‰¹å‡†ã€‚ç®¡ç†å‘˜æ‰¹å‡†åå³å¯ä½¿ç”¨ã€‚',
        msgResigned: 'è¯¥è´¦æˆ·å·²ç¦»èŒã€‚',
        errLoginFail: 'ç™»å½•å¤±è´¥',
        errSignupFail: 'æ³¨å†Œå¤±è´¥',
        pageTitleLogin: 'ç™»å½•',
      },
      'ç¹é«”ä¸­æ–‡': {
        companyName: 'æ ªå¼ä¼šç¤¾ãƒ¤ãƒŸãƒ¼',
        subtitle: 'é…é€èˆ‡ç‰©æµç®¡ç†',
        usernamePlaceholder: 'ç”¨æˆ¶å',
        passwordPlaceholder: 'å¯†ç¢¼',
        loginBtn: 'ç™»å…¥',
        signupLink: 'è¨»å†Š',
        signupTitle: 'è¨»å†Š',
        signupUsernamePlaceholder: 'ç”¨æˆ¶åï¼ˆå­—æ¯ã€æ•¸å­—ç­‰ï¼‰',
        signupPasswordPlaceholder: 'å¯†ç¢¼ï¼ˆ4ä½ä»¥ä¸Šï¼‰',
        signupDisplayNamePlaceholder: 'å§“å *',
        signupPhonePlaceholder: 'é›»è©± *',
        signupPreferredLocaleLabel: 'é¦–é¸èªè¨€',
        signupBtn: 'è¨»å†Š',
        backToLogin: 'è¿”å›ç™»å…¥',
        usernameCheckHint: 'é»æ“Šå…¶ä»–è™•æª¢æŸ¥æ˜¯å¦å¯ç”¨',
        usernameAvailable: 'ç”¨æˆ¶åå¯ç”¨',
        usernameTaken: 'ç”¨æˆ¶åå·²è¢«ä½¿ç”¨',
        errUsernameRequired: 'è«‹è¼¸å…¥ç”¨æˆ¶åã€‚',
        errPasswordMin: 'å¯†ç¢¼è‡³å°‘4ä½ã€‚',
        errDisplayNameRequired: 'è«‹è¼¸å…¥å§“åã€‚',
        errPhoneRequired: 'è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼ã€‚',
        errUsernameTaken: 'ç”¨æˆ¶åå·²è¢«ä½¿ç”¨ã€‚',
        msgSignupSuccess: 'è¨»å†Šå®Œæˆã€‚ç®¡ç†å“¡æ‰¹å‡†å¾Œå¯ç™»å…¥ã€‚',
        msgPendingApproval: 'ç­‰å¾…æ‰¹å‡†ã€‚ç®¡ç†å“¡æ‰¹å‡†å¾Œå³å¯ä½¿ç”¨ã€‚',
        msgResigned: 'è©²å¸³æˆ¶å·²é›¢è·ã€‚',
        errLoginFail: 'ç™»å…¥å¤±æ•—',
        errSignupFail: 'è¨»å†Šå¤±æ•—',
        pageTitleLogin: 'ç™»å…¥',
      },
      ë² íŠ¸ë‚¨: {
        companyName: 'CÃ´ng ty Yummy',
        subtitle: 'Quáº£n lÃ½ giao hÃ ng & Logistics',
        usernamePlaceholder: 'TÃªn Ä‘Äƒng nháº­p',
        passwordPlaceholder: 'Máº­t kháº©u',
        loginBtn: 'ÄÄƒng nháº­p',
        signupLink: 'ÄÄƒng kÃ½',
        signupTitle: 'ÄÄƒng kÃ½',
        signupUsernamePlaceholder: 'TÃªn Ä‘Äƒng nháº­p (chá»¯, sá»‘)',
        signupPasswordPlaceholder: 'Máº­t kháº©u (Ã­t nháº¥t 4 kÃ½ tá»±)',
        signupDisplayNamePlaceholder: 'Há» tÃªn *',
        signupPhonePlaceholder: 'Sá»‘ Ä‘iá»‡n thoáº¡i *',
        signupPreferredLocaleLabel: 'NgÃ´n ngá»¯ Æ°u tiÃªn',
        signupBtn: 'ÄÄƒng kÃ½',
        backToLogin: 'Quay láº¡i Ä‘Äƒng nháº­p',
        usernameCheckHint: 'Nháº¥n ra ngoÃ i Ä‘á»ƒ kiá»ƒm tra',
        usernameAvailable: 'TÃªn Ä‘Äƒng nháº­p cÃ³ sáºµn',
        usernameTaken: 'TÃªn Ä‘Äƒng nháº­p Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng',
        errUsernameRequired: 'Vui lÃ²ng nháº­p tÃªn Ä‘Äƒng nháº­p.',
        errPasswordMin: 'Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 4 kÃ½ tá»±.',
        errDisplayNameRequired: 'Vui lÃ²ng nháº­p há» tÃªn.',
        errPhoneRequired: 'Vui lÃ²ng nháº­p sá»‘ Ä‘iá»‡n thoáº¡i.',
        errUsernameTaken: 'TÃªn Ä‘Äƒng nháº­p Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng.',
        msgSignupSuccess: 'ÄÄƒng kÃ½ hoÃ n táº¥t. Báº¡n cÃ³ thá»ƒ Ä‘Äƒng nháº­p sau khi quáº£n trá»‹ viÃªn phÃª duyá»‡t.',
        msgPendingApproval: 'Äang chá» phÃª duyá»‡t. Vui lÃ²ng chá» quáº£n trá»‹ viÃªn xÃ¡c nháº­n.',
        msgResigned: 'TÃ i khoáº£n nÃ y Ä‘Ã£ nghá»‰ viá»‡c.',
        errLoginFail: 'ÄÄƒng nháº­p tháº¥t báº¡i',
        errSignupFail: 'ÄÄƒng kÃ½ tháº¥t báº¡i',
        pageTitleLogin: 'ÄÄƒng nháº­p',
      },
      ë¼ì˜¤ìŠ¤: {
        companyName: 'àºšà»àº¥àº´àºªàº±àº” àº¢àº±àº¡àº¡àºµ',
        subtitle: 'àºˆàº±àº”àºªàº»à»ˆàº‡ à»àº¥àº° àº¥àº°àºšàº»àºšàº„àº»àº§àº„àº²àº™',
        usernamePlaceholder: 'àºŠàº·à»ˆàºœàº¹à»‰à»ƒàºŠà»‰',
        passwordPlaceholder: 'àº¥àº°àº«àº±àº”àºœà»ˆàº²àº™',
        loginBtn: 'à»€àº‚àº»à»‰àº²àºªàº¹à»ˆàº¥àº°àºšàº»àºš',
        signupLink: 'àº¥àº»àº‡àº—àº°àºšàº½àº™',
        signupTitle: 'àº¥àº»àº‡àº—àº°àºšàº½àº™',
        signupUsernamePlaceholder: 'àºŠàº·à»ˆàºœàº¹à»‰à»ƒàºŠà»‰ (àº•àº»àº§àº­àº±àºàºªàº­àº™, à»€àº¥àº)',
        signupPasswordPlaceholder: 'àº¥àº°àº«àº±àº”àºœà»ˆàº²àº™ (àº¢à»ˆàº²àº‡à»œà»‰àº­àº 4 àº•àº»àº§àº­àº±àºàºªàº­àº™)',
        signupDisplayNamePlaceholder: 'àºŠàº·à»ˆ *',
        signupPhonePlaceholder: 'à»€àºšàºµà»‚àº— *',
        signupPreferredLocaleLabel: 'àºàº²àºªàº²àº—àºµà»ˆàº•à»‰àº­àº‡àºàº²àº™',
        signupBtn: 'àº¥àº»àº‡àº—àº°àºšàº½àº™',
        backToLogin: 'àºàº±àºšà»„àº›à»€àº‚àº»à»‰àº²àºªàº¹à»ˆàº¥àº°àºšàº»àºš',
        usernameCheckHint: 'àº„àº¥àº´àºàº™àº­àºà»€àºàº·à»ˆàº­àºàº§àº”àºªàº­àºš',
        usernameAvailable: 'àºŠàº·à»ˆàºœàº¹à»‰à»ƒàºŠà»‰àºà»‰àº­àº¡à»ƒàºŠà»‰',
        usernameTaken: 'àºŠàº·à»ˆàºœàº¹à»‰à»ƒàºŠà»‰àº–àº·àºà»ƒàºŠà»‰à»àº¥à»‰àº§',
        errUsernameRequired: 'àºàº°àº¥àº¸àº™àº²àº›à»‰àº­àº™àºŠàº·à»ˆàºœàº¹à»‰à»ƒàºŠà»‰.',
        errPasswordMin: 'àº¥àº°àº«àº±àº”àºœà»ˆàº²àº™àº•à»‰àº­àº‡àº¡àºµàº¢à»ˆàº²àº‡à»œà»‰àº­àº 4 àº•àº»àº§àº­àº±àºàºªàº­àº™.',
        errDisplayNameRequired: 'àºàº°àº¥àº¸àº™àº²àº›à»‰àº­àº™àºŠàº·à»ˆ.',
        errPhoneRequired: 'àºàº°àº¥àº¸àº™àº²àº›à»‰àº­àº™à»€àºšàºµà»‚àº—.',
        errUsernameTaken: 'àºŠàº·à»ˆàºœàº¹à»‰à»ƒàºŠà»‰àº–àº·àºà»ƒàºŠà»‰à»àº¥à»‰àº§.',
        msgSignupSuccess: 'àº¥àº»àº‡àº—àº°àºšàº½àº™àºªàº³à»€àº¥àº±àº”. àº—à»ˆàº²àº™àºªàº²àº¡àº²àº”à»€àº‚àº»à»‰àº²àºªàº¹à»ˆàº¥àº°àºšàº»àºšà»„àº”à»‰àº«àº¼àº±àº‡àº­àº°àº™àº¸àº¡àº±àº”àºˆàº²àºàºœàº¹à»‰àºšà»àº¥àº´àº«àº²àº™.',
        msgPendingApproval: 'àº¥à»àº–à»‰àº²àº­àº°àº™àº¸àº¡àº±àº”. àºàº°àº¥àº¸àº™àº²àº¥à»àº–à»‰àº²àºœàº¹à»‰àºšà»àº¥àº´àº«àº²àº™àº­àº°àº™àº¸àº¡àº±àº”.',
        msgResigned: 'àºšàº±àº™àºŠàºµàº™àºµà»‰àº¥àº¶àºšàº­àº­àºà»àº¥à»‰àº§.',
        errLoginFail: 'à»€àº‚àº»à»‰àº²àºªàº¹à»ˆàº¥àº°àºšàº»àºšàºšà»à»ˆàºªàº³à»€àº¥àº±àº”',
        errSignupFail: 'àº¥àº»àº‡àº—àº°àºšàº½àº™àºšà»à»ˆàºªàº³à»€àº¥àº±àº”',
        pageTitleLogin: 'à»€àº‚àº»à»‰àº²àºªàº¹à»ˆàº¥àº°àºšàº»àºš',
      },
      ìº„ë³´ë””ì•„: {
        companyName: 'á€áŸ’ášá»á˜á áŸŠá»á“ á™áŸ„á˜á˜á¸',
        subtitle: 'áŠá¹á€á‡á‰áŸ’á‡á¼á“ á“á·á„ á¡á¼á‡á¸áŸáŸ’á‘á·á…',
        usernamePlaceholder: 'áˆáŸ’á˜áŸ„áŸ‡á‚áá“á¸',
        passwordPlaceholder: 'á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹',
        loginBtn: 'á…á¼á›',
        signupLink: 'á…á»áŸ‡áˆáŸ’á˜áŸ„áŸ‡',
        signupTitle: 'á…á»áŸ‡áˆáŸ’á˜áŸ„áŸ‡',
        signupUsernamePlaceholder: 'áˆáŸ’á˜áŸ„áŸ‡á‚áá“á¸ (á¢á€áŸ’áŸáš, á›áŸá)',
        signupPasswordPlaceholder: 'á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹ (á™áŸ‰á¶á„á áŸ„á…áá¶áŸáŸ‹ 4 áá½)',
        signupDisplayNamePlaceholder: 'áˆáŸ’á˜áŸ„áŸ‡ *',
        signupPhonePlaceholder: 'á‘á¼ášáŸáŸá–áŸ’á‘ *',
        signupPreferredLocaleLabel: 'á—á¶áŸá¶áŠáŸ‚á›á…á¼á›á…á·ááŸ’á',
        signupBtn: 'á…á»áŸ‡áˆáŸ’á˜áŸ„áŸ‡',
        backToLogin: 'ááŸ’ášá¡á”áŸ‹á…á¼á›',
        usernameCheckHint: 'á…á¼ášá…á»á…á“áŸ…á€á“áŸ’á›áŸ‚á„á•áŸ’áŸáŸá„áŠá¾á˜áŸ’á”á¸á–á·á“á·ááŸ’á™',
        usernameAvailable: 'áˆáŸ’á˜áŸ„áŸ‡á‚áá“á¸á¢á¶á…á”áŸ’ášá¾á”á¶á“',
        usernameTaken: 'áˆáŸ’á˜áŸ„áŸ‡á‚áá“á¸ááŸ’ášá¼áœá”á¶á“á”áŸ’ášá¾ášá½á…á á¾á™',
        errUsernameRequired: 'áŸá¼á˜á”á‰áŸ’á…á¼á›áˆáŸ’á˜áŸ„áŸ‡á‚áá“á¸áŸ”',
        errPasswordMin: 'á–á¶á€áŸ’á™áŸá˜áŸ’á„á¶ááŸ‹ááŸ’ášá¼áœá˜á¶á“á™áŸ‰á¶á„á áŸ„á…áá¶áŸáŸ‹ 4 áá½áŸ”',
        errDisplayNameRequired: 'áŸá¼á˜á”á‰áŸ’á…á¼á›áˆáŸ’á˜áŸ„áŸ‡áŸ”',
        errPhoneRequired: 'áŸá¼á˜á”á‰áŸ’á…á¼á›á›áŸáá‘á¼ášáŸáŸá–áŸ’á‘áŸ”',
        errUsernameTaken: 'áˆáŸ’á˜áŸ„áŸ‡á‚áá“á¸ááŸ’ášá¼áœá”á¶á“á”áŸ’ášá¾ášá½á…á á¾á™áŸ”',
        msgSignupSuccess: 'á…á»áŸ‡áˆáŸ’á˜áŸ„áŸ‡ášá½á…ášá¶á›áŸ‹áŸ” á¢áŸ’á“á€á¢á¶á…á…á¼á›á”á¶á“á”á“áŸ’á‘á¶á”áŸ‹á–á¸á¢áŸ’á“á€á‚áŸ’ášá”áŸ‹á‚áŸ’ášá„á™á›áŸ‹á–áŸ’ášá˜áŸ”',
        msgPendingApproval: 'á€á¶ášášá„áŸ‹á…á¶áŸ†á€á¶ášá™á›áŸ‹á–áŸ’ášá˜áŸ” áŸá¼á˜ášá„áŸ‹á…á¶áŸ†á¢áŸ’á“á€á‚áŸ’ášá”áŸ‹á‚áŸ’ášá„á™á›áŸ‹á–áŸ’ášá˜áŸ”',
        msgResigned: 'á‚áá“á¸á“áŸáŸ‡ááŸ’ášá¼áœá”á¶á“á…á¶á€á…áŸá‰ášá½á…á á¾á™áŸ”',
        errLoginFail: 'á…á¼á›á˜á·á“á‡áŸ„á‚á‡áŸá™',
        errSignupFail: 'á…á»áŸ‡áˆáŸ’á˜áŸ„áŸ‡á˜á·á“á‡áŸ„á‚á‡áŸá™',
        pageTitleLogin: 'á…á¼á›',
      },
      ì¸ë„: {
        companyName: 'Yummy Pvt. Ltd.',
        subtitle: 'à¤µà¤¿à¤¤à¤°à¤£ à¤”à¤° à¤°à¤¸à¤¦ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨',
        usernamePlaceholder: 'à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤®',
        passwordPlaceholder: 'à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡',
        loginBtn: 'à¤²à¥‰à¤— à¤‡à¤¨ à¤•à¤°à¥‡à¤‚',
        signupLink: 'à¤¸à¤¾à¤‡à¤¨ à¤…à¤ª à¤•à¤°à¥‡à¤‚',
        signupTitle: 'à¤¸à¤¾à¤‡à¤¨ à¤…à¤ª à¤•à¤°à¥‡à¤‚',
        signupUsernamePlaceholder: 'à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤® (à¤…à¤•à¥à¤·à¤°, à¤¸à¤‚à¤–à¥à¤¯à¤¾)',
        signupPasswordPlaceholder: 'à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ (à¤•à¤® à¤¸à¥‡ à¤•à¤® 4 à¤…à¤•à¥à¤·à¤°)',
        signupDisplayNamePlaceholder: 'à¤¨à¤¾à¤® *',
        signupPhonePlaceholder: 'à¤«à¥‹à¤¨ *',
        signupPreferredLocaleLabel: 'à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾ à¤­à¤¾à¤·à¤¾',
        signupBtn: 'à¤¸à¤¾à¤‡à¤¨ à¤…à¤ª à¤•à¤°à¥‡à¤‚',
        backToLogin: 'à¤²à¥‰à¤— à¤‡à¤¨ à¤ªà¤° à¤µà¤¾à¤ªà¤¸ à¤œà¤¾à¤à¤‚',
        usernameCheckHint: 'à¤‰à¤ªà¤²à¤¬à¥à¤§à¤¤à¤¾ à¤œà¤¾à¤‚à¤šà¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤•à¤¹à¥€à¤‚ à¤”à¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚',
        usernameAvailable: 'à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤® à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¹à¥ˆ',
        usernameTaken: 'à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤® à¤ªà¤¹à¤²à¥‡ à¤¸à¥‡ à¤²à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆ',
        errUsernameRequired: 'à¤•à¥ƒà¤ªà¤¯à¤¾ à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤',
        errPasswordMin: 'à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤•à¤® à¤¸à¥‡ à¤•à¤® 4 à¤…à¤•à¥à¤·à¤°à¥‹à¤‚ à¤•à¤¾ à¤¹à¥‹à¤¨à¤¾ à¤šà¤¾à¤¹à¤¿à¤à¥¤',
        errDisplayNameRequired: 'à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤',
        errPhoneRequired: 'à¤•à¥ƒà¤ªà¤¯à¤¾ à¤«à¥‹à¤¨ à¤¨à¤‚à¤¬à¤° à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚à¥¤',
        errUsernameTaken: 'à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤® à¤ªà¤¹à¤²à¥‡ à¤¸à¥‡ à¤²à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤',
        msgSignupSuccess: 'à¤¸à¤¾à¤‡à¤¨ à¤…à¤ª à¤ªà¥‚à¤°à¥à¤£à¥¤ à¤ªà¥à¤°à¤¶à¤¾à¤¸à¤• à¤•à¥€ à¤®à¤‚à¤œà¥‚à¤°à¥€ à¤•à¥‡ à¤¬à¤¾à¤¦ à¤†à¤ª à¤²à¥‰à¤— à¤‡à¤¨ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤',
        msgPendingApproval: 'à¤®à¤‚à¤œà¥‚à¤°à¥€ à¤•à¥€ à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤®à¥‡à¤‚à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥à¤°à¤¶à¤¾à¤¸à¤• à¤•à¥€ à¤®à¤‚à¤œà¥‚à¤°à¥€ à¤•à¥€ à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤•à¤°à¥‡à¤‚à¥¤',
        msgResigned: 'à¤¯à¤¹ à¤–à¤¾à¤¤à¤¾ à¤‡à¤¸à¥à¤¤à¥€à¤«à¤¾ à¤¦à¥‡ à¤¦à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤',
        errLoginFail: 'à¤²à¥‰à¤— à¤‡à¤¨ à¤µà¤¿à¤«à¤²',
        errSignupFail: 'à¤¸à¤¾à¤‡à¤¨ à¤…à¤ª à¤µà¤¿à¤«à¤²',
        pageTitleLogin: 'à¤²à¥‰à¤— à¤‡à¤¨ à¤•à¤°à¥‡à¤‚',
      },
      íŒŒí‚¤ìŠ¤íƒ„: {
        companyName: 'Yummy (Pvt.) Ltd.',
        subtitle: 'ÚˆÛŒÙ„ÛŒÙˆØ±ÛŒ Ø§ÙˆØ± Ù„Ø§Ø¬Ø³Ù¹Ú©Ø³',
        usernamePlaceholder: 'ØµØ§Ø±Ù Ù†Ø§Ù…',
        passwordPlaceholder: 'Ù¾Ø§Ø³ ÙˆØ±Úˆ',
        loginBtn: 'Ù„Ø§Ú¯ Ø§Ù†',
        signupLink: 'Ø³Ø§Ø¦Ù† Ø§Ù¾',
        signupTitle: 'Ø³Ø§Ø¦Ù† Ø§Ù¾',
        signupUsernamePlaceholder: 'ØµØ§Ø±Ù Ù†Ø§Ù… (Ø­Ø±ÙˆÙØŒ Ø§Ø¹Ø¯Ø§Ø¯)',
        signupPasswordPlaceholder: 'Ù¾Ø§Ø³ ÙˆØ±Úˆ (Ú©Ù… Ø§Ø² Ú©Ù… 4 Ø­Ø±ÙˆÙ)',
        signupDisplayNamePlaceholder: 'Ù†Ø§Ù… *',
        signupPhonePlaceholder: 'ÙÙˆÙ† *',
        signupPreferredLocaleLabel: 'Ù¾Ø³Ù†Ø¯ÛŒØ¯Û Ø²Ø¨Ø§Ù†',
        signupBtn: 'Ø³Ø§Ø¦Ù† Ø§Ù¾',
        backToLogin: 'Ù„Ø§Ú¯ Ø§Ù† Ù¾Ø± ÙˆØ§Ù¾Ø³',
        usernameCheckHint: 'Ø¯Ø³ØªÛŒØ§Ø¨ÛŒ Ú†ÛŒÚ© Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ú©ÛÛŒÚº Ø§ÙˆØ± Ú©Ù„Ú© Ú©Ø±ÛŒÚº',
        usernameAvailable: 'ØµØ§Ø±Ù Ù†Ø§Ù… Ø¯Ø³ØªÛŒØ§Ø¨ ÛÛ’',
        usernameTaken: 'ØµØ§Ø±Ù Ù†Ø§Ù… Ù¾ÛÙ„Û’ Ø³Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ù…ÛŒÚº ÛÛ’',
        errUsernameRequired: 'Ø¨Ø±Ø§Û Ú©Ø±Ù… ØµØ§Ø±Ù Ù†Ø§Ù… Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”',
        errPasswordMin: 'Ù¾Ø§Ø³ ÙˆØ±Úˆ Ú©Ù… Ø§Ø² Ú©Ù… 4 Ø­Ø±ÙˆÙ Ú©Ø§ ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’Û”',
        errDisplayNameRequired: 'Ø¨Ø±Ø§Û Ú©Ø±Ù… Ù†Ø§Ù… Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”',
        errPhoneRequired: 'Ø¨Ø±Ø§Û Ú©Ø±Ù… ÙÙˆÙ† Ù†Ù…Ø¨Ø± Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”',
        errUsernameTaken: 'ØµØ§Ø±Ù Ù†Ø§Ù… Ù¾ÛÙ„Û’ Ø³Û’ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ù…ÛŒÚº ÛÛ’Û”',
        msgSignupSuccess: 'Ø³Ø§Ø¦Ù† Ø§Ù¾ Ù…Ú©Ù…Ù„Û” Ø§ÛŒÚˆÙ…Ù† Ú©ÛŒ Ù…Ù†Ø¸ÙˆØ±ÛŒ Ú©Û’ Ø¨Ø¹Ø¯ Ø¢Ù¾ Ù„Ø§Ú¯ Ø§Ù† Ú©Ø± Ø³Ú©ØªÛ’ ÛÛŒÚºÛ”',
        msgPendingApproval: 'Ù…Ù†Ø¸ÙˆØ±ÛŒ Ú©Ø§ Ø§Ù†ØªØ¸Ø§Ø±Û” Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§ÛŒÚˆÙ…Ù† Ú©ÛŒ Ù…Ù†Ø¸ÙˆØ±ÛŒ Ú©Ø§ Ø§Ù†ØªØ¸Ø§Ø± Ú©Ø±ÛŒÚºÛ”',
        msgResigned: 'ÛŒÛ Ø§Ú©Ø§Ø¤Ù†Ù¹ Ø§Ø³ØªØ¹ÙÛŒÙ° Ø¯Û’ Ø¯ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’Û”',
        errLoginFail: 'Ù„Ø§Ú¯ Ø§Ù† Ù†Ø§Ú©Ø§Ù…',
        errSignupFail: 'Ø³Ø§Ø¦Ù† Ø§Ù¾ Ù†Ø§Ú©Ø§Ù…',
        pageTitleLogin: 'Ù„Ø§Ú¯ Ø§Ù†',
      },
    };

    let currentLocale = 'ëŒ€í•œë¯¼êµ­';

    function t(key) {
      const L = I18N[currentLocale] || I18N['ëŒ€í•œë¯¼êµ­'];
      return L[key] ?? I18N['ëŒ€í•œë¯¼êµ­'][key] ?? key;
    }

    function applyLocale(locale) {
      currentLocale = locale || 'ëŒ€í•œë¯¼êµ­';
      const L = I18N[currentLocale] || I18N['ëŒ€í•œë¯¼êµ­'];
      document.body.dir = (currentLocale === 'íŒŒí‚¤ìŠ¤íƒ„') ? 'rtl' : 'ltr';
      document.title = 'Yummy(ë§›ë‚˜) - ' + (L.pageTitleLogin || 'ë¡œê·¸ì¸');
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (key && L[key]) el.textContent = L[key];
      });
      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (key && L[key]) el.placeholder = L[key];
      });
      document.querySelectorAll('[data-i18n-title]').forEach(el => {
        const key = el.getAttribute('data-i18n-title');
        if (key && L[key]) el.title = L[key];
      });
    }

    document.getElementById('loginPreferredLocale').addEventListener('change', (e) => {
      applyLocale(e.target.value);
    });

    applyLocale(document.getElementById('loginPreferredLocale').value);

    function showSignupForm() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('error').style.display = 'none';
      document.getElementById('signupSection').style.display = 'block';
      document.getElementById('signupError').textContent = '';
      const statusEl = document.getElementById('signupUsernameStatus');
      if (statusEl) { statusEl.textContent = ''; statusEl.className = 'username-status'; }
      const loginPref = document.getElementById('loginPreferredLocale')?.value;
      const signupPref = document.getElementById('signupPreferredLocale');
      if (loginPref && signupPref && Array.from(signupPref.options).some(o => o.value === loginPref)) {
        signupPref.value = loginPref;
      }
    }
    function showLoginForm() {
      document.getElementById('signupSection').style.display = 'none';
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('error').style.display = 'block';
      document.getElementById('error').textContent = '';
      const statusEl = document.getElementById('signupUsernameStatus');
      if (statusEl) { statusEl.textContent = ''; statusEl.className = 'username-status'; }
    }

    async function checkSignupUsername() {
      const inp = document.getElementById('signupUsername');
      const statusEl = document.getElementById('signupUsernameStatus');
      if (!inp || !statusEl) return;
      const username = inp.value.trim();
      if (!username) {
        statusEl.textContent = '';
        statusEl.className = 'username-status';
        return;
      }
      try {
        const available = await api.checkUsername(username);
        statusEl.textContent = available ? 'âœ“' : 'âœ—';
        statusEl.className = 'username-status ' + (available ? 'ok' : 'fail');
        statusEl.title = available ? t('usernameAvailable') : t('usernameTaken');
      } catch (e) {
        statusEl.textContent = '';
        statusEl.className = 'username-status';
      }
    }

    (async () => {
      const user = await api.me();
      if (user) {
        if (user.must_change_password) {
          location.href = '/change-password.html';
          return;
        }
        if (user.role === 'ADMIN') {
          location.href = '/admin.html';
          return;
        }
        if (user.role === 'DRIVER') {
          location.href = '/driver.html';
          return;
        }
      }
    })();

    document.getElementById('loginForm').onsubmit = async (e) => {
      e.preventDefault();
      const err = document.getElementById('error');
      err.textContent = '';
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      try {
        const res = await api.login(username, password);
        if (res.ok && res.user) {
          if (res.user.must_change_password) {
            location.href = '/change-password.html';
            return;
          }
          if (res.user.role === 'ADMIN') {
            location.href = '/admin.html';
            return;
          }
          if (res.user.role === 'DRIVER' && res.user.status === 'ìŠ¹ì¸ìš”ì²­ì¤‘') {
            err.textContent = t('msgPendingApproval');
            return;
          }
          if (res.user.role === 'DRIVER' && res.user.status === 'í‡´ì‚¬') {
            err.textContent = t('msgResigned');
            return;
          }
          location.href = '/driver.html';
        } else {
          err.textContent = res.detail || t('errLoginFail');
        }
      } catch (e) {
        err.textContent = e.detail || e.message || t('errLoginFail');
      }
    };

    document.getElementById('signupForm').onsubmit = async (e) => {
      e.preventDefault();
      const err = document.getElementById('signupError');
      err.textContent = '';
      const username = document.getElementById('signupUsername').value.trim();
      const password = document.getElementById('signupPassword').value;
      const displayName = document.getElementById('signupDisplayName').value.trim();
      const phone = document.getElementById('signupPhone').value.trim();
      if (!username) { err.textContent = t('errUsernameRequired'); return; }
      if (password.length < 4) { err.textContent = t('errPasswordMin'); return; }
      if (!displayName) { err.textContent = t('errDisplayNameRequired'); return; }
      if (!phone) { err.textContent = t('errPhoneRequired'); return; }
      const statusEl = document.getElementById('signupUsernameStatus');
      if (statusEl?.classList?.contains('fail')) {
        err.textContent = t('errUsernameTaken');
        return;
      }
      try {
        const preferredLocale = document.getElementById('signupPreferredLocale')?.value?.trim() || 'ëŒ€í•œë¯¼êµ­';
        await api.signup(username, password, displayName, phone, preferredLocale);
        alert(t('msgSignupSuccess'));
        showLoginForm();
        document.getElementById('username').value = username;
      } catch (e) {
        err.textContent = e.detail || e.message || t('errSignupFail');
      }
    };
  </script>
</body>
</html>
