<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yummy - 관리자</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="/css/common.css">
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <h1>Yummy 관리자</h1>
      <button class="logout" onclick="doLogout()">로그아웃</button>
    </header>
    <main class="app-content">
      <nav class="nav-tabs">
        <a href="#" class="active" data-tab="plans">플랜</a>
        <a href="#" data-tab="customers">거래처</a>
        <a href="#" data-tab="items">품목</a>
        <a href="#" data-tab="users">사용자</a>
        <a href="#" data-tab="reports">리포트</a>
      </nav>

      <div id="tab-plans" class="tab-content">
        <div class="card">
          <h2>플랜 목록</h2>
          <p><a href="#" class="btn btn-primary" onclick="showPlanForm()">+ 새 플랜</a></p>
          <table><thead><tr><th>날짜</th><th>이름</th><th></th></tr></thead><tbody id="plansList"></tbody></table>
        </div>
        <div id="planDetail" style="display:none"></div>
      </div>

      <div id="tab-customers" class="tab-content" style="display:none">
        <div class="card">
          <h2>거래처</h2>
          <p>
            <button class="btn btn-primary" type="button" onclick="showCustomerForm()">+ 추가</button>
            <button class="btn btn-secondary" type="button" onclick="exportCustomersExcel()">Excel 내보내기</button>
            <label class="btn btn-secondary" style="margin:0; cursor:pointer">
              Excel 가져오기
              <input type="file" id="customerExcelInput" accept=".xlsx" style="display:none" onchange="importCustomersExcel(event)">
            </label>
            <button class="btn btn-secondary" type="button" onclick="deleteAllCustomers()" style="color:var(--highlight)">거래처 전체 지우기</button>
          </p>
          <table><thead><tr><th>코드</th><th>루트</th><th>이름</th><th>연락처</th><th>계약</th><th>주소</th><th></th></tr></thead><tbody id="customersList"></tbody></table>
        </div>
      </div>

      <div id="tab-items" class="tab-content" style="display:none">
        <div class="card">
          <h2>품목</h2>
          <p><button class="btn btn-primary" onclick="showItemForm()">+ 추가</button></p>
          <table><thead><tr><th>코드</th><th>이름</th><th>단위</th><th>단가</th><th></th></tr></thead><tbody id="itemsList"></tbody></table>
        </div>
      </div>

      <div id="tab-users" class="tab-content" style="display:none">
        <div class="card">
          <h2>사용자</h2>
          <p><button class="btn btn-primary" onclick="showUserForm()">+ 기사 추가</button></p>
          <table><thead><tr><th>아이디</th><th>역할</th><th>이름</th></tr></thead><tbody id="usersList"></tbody></table>
        </div>
      </div>

      <div id="tab-reports" class="tab-content" style="display:none">
        <div class="card">
          <h2>월말 정산 리포트</h2>
          <p>
            <input type="number" id="reportYear" placeholder="년" min="2020" value="2025">
            <input type="number" id="reportMonth" placeholder="월" min="1" max="12" value="2">
            <a href="#" class="btn btn-primary" onclick="downloadReport()">PDF 다운로드</a>
          </p>
        </div>
      </div>
    </main>
  </div>

  <div id="customerModal" class="modal-overlay" style="display:none" onclick="if(event.target===this) closeCustomerModal()">
    <div class="modal-box" onclick="event.stopPropagation()">
      <h3 id="customerModalTitle">거래처 추가</h3>
      <form id="customerForm">
        <input type="hidden" id="customerId" value="">
        <div class="form-group">
          <label for="customerCode">코드</label>
          <input type="text" id="customerCode" placeholder="거래처 코드 (비우면 자동생성)">
        </div>
        <div class="form-group">
          <label for="customerRoute">루트</label>
          <input type="text" id="customerRoute" placeholder="루트 (선택)">
        </div>
        <div class="form-group">
          <label for="customerName">이름 *</label>
          <input type="text" id="customerName" required placeholder="거래처 이름">
        </div>
        <div class="form-group">
          <label for="customerPhone">연락처</label>
          <input type="text" id="customerPhone" placeholder="전화번호">
        </div>
        <div class="form-group">
          <label for="customerContract">계약</label>
          <select id="customerContract">
            <option value="">선택</option>
            <option value="계약">계약</option>
            <option value="해지">해지</option>
          </select>
        </div>
        <div class="form-group">
          <label for="customerAddress">주소</label>
          <input type="text" id="customerAddress" placeholder="주소">
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="closeCustomerModal()">취소</button>
          <button type="submit" class="btn btn-primary">저장</button>
        </div>
      </form>
    </div>
  </div>

  <script src="/js/api.js"></script>
  <script src="/js/admin.js?v=2"></script>
</body>
</html>
